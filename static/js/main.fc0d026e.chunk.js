(this["webpackJsonpuma-calc"]=this["webpackJsonpuma-calc"]||[]).push([[0],[,,,,,,,,,,,,function(e,i,t){},function(e,i,t){},function(e,i,t){},function(e,i,t){},,function(e,i,t){},function(e,i,t){"use strict";t.r(i);var o=t(1),n=t.n(o),r=t(7),a=t.n(r),s=(t(12),t(2)),l=t(3),c=t(5),d=t(4),u=(t(13),10),p=11,m=12,h=13,b=14,C=15,y=16,f=17,g=18,v=19,j=20,O=21,k=22,w=23,x=24,S=25,H=26,P=27,L=28,M=29,B=[];B[0]={id:0,name:"Special Week",mainColor:"purple",secondaryColor:"white",compatibilities:[w,9,H,j,k,g,u,6,5,m,b,f,p,4,P,x,C,1,y,2,h,L,7,M,3,S,v,8,O]},B[1]={id:1,name:"Silence Suzuka",mainColor:"green",secondaryColor:"orange",compatibilities:[k,b,L,0,f,j,u,5,H,w,g,h,4,9,2,P,C,p,7,M,3,y,6,m,8,v,x,S,O]},B[2]={id:2,name:"Tokai Teio",mainColor:"blue",secondaryColor:"white",compatibilities:[u,7,m,H,h,P,y,6,p,j,f,w,5,0,b,L,g,M,4,S,1,9,v,8,k,C,x,3,O]},B[3]={id:3,name:"Maruzensky",mainColor:"red",secondaryColor:"brown",compatibilities:[L,8,4,p,9,1,7,x,v,6,b,S,m,j,0,f,g,k,y,h,5,2,M,P,H,w,u,C,O]},B[4]={id:4,name:"Oguri Cap",mainColor:"white",secondaryColor:"yellow",compatibilities:[6,9,g,j,w,0,k,C,f,7,L,p,5,H,b,m,1,8,2,P,3,u,x,M,h,y,S,v,O]},B[5]={id:5,name:"Gold Ship",mainColor:"red",secondaryColor:"white",compatibilities:[P,u,b,H,m,j,M,0,w,y,g,4,2,h,1,k,C,f,7,L,p,9,6,x,O,S,v,8,3]},B[6]={id:6,name:"Vodka",mainColor:"grey",secondaryColor:"yellow",compatibilities:[7,4,9,0,f,L,g,2,w,p,k,C,u,h,x,H,m,j,5,1,8,M,P,b,3,y,S,v,O]},B[7]={id:7,name:"Daiwa Scarlet",mainColor:"blue",secondaryColor:"red",compatibilities:[6,p,2,u,h,j,4,m,H,P,9,L,8,y,S,5,f,g,1,0,k,b,3,w,M,v,C,x,O]},B[8]={id:8,name:"Taiki Shuttle",mainColor:"green",secondaryColor:"purple",compatibilities:[v,p,3,L,S,7,y,m,9,4,x,H,2,6,h,j,P,u,k,1,f,C,g,5,0,w,b,M,O]},B[9]={id:9,name:"Grass Wonder",mainColor:"blue",secondaryColor:"brown",compatibilities:[p,0,4,6,C,w,f,x,7,k,L,g,m,8,H,1,b,y,5,2,3,h,P,u,j,M,v,S,O]},B[10]={id:u,name:"Mejiro McQueen",mainColor:"white",secondaryColor:"purple",compatibilities:[P,j,H,y,5,m,2,7,b,0,w,h,p,C,6,1,f,g,k,4,S,v,M,L,9,8,x,3,O]},B[11]={id:p,name:"El Condor Pasa",mainColor:"red",secondaryColor:"yellow",compatibilities:[9,7,m,8,H,y,0,2,6,h,4,j,P,L,u,5,1,v,w,3,C,f,g,k,b,x,M,S,O]},B[12]={id:m,name:"Symboli Rudolf",mainColor:"green",secondaryColor:"brown",compatibilities:[y,H,j,P,u,5,2,p,0,b,h,7,w,8,4,9,f,g,6,v,M,L,C,1,k,S,3,x,O]},B[13]={id:h,name:"Air Groove",mainColor:"blue",secondaryColor:"yellow",compatibilities:[7,2,m,j,P,u,H,p,y,6,g,5,f,1,0,M,S,v,w,k,L,C,4,9,8,b,x,3,O]},B[14]={id:b,name:"Mayano Top Gun",mainColor:"yellow",secondaryColor:"brown",compatibilities:[5,H,P,u,j,1,m,0,w,y,L,g,4,2,k,9,f,7,M,C,6,h,p,3,x,S,v,8,O]},B[15]={id:C,name:"Mejiro Ryan",mainColor:"cyan",secondaryColor:"brown",compatibilities:[g,4,9,w,f,0,k,6,u,5,y,1,M,P,h,p,m,2,b,x,j,H,L,v,7,8,3,S,O]},B[16]={id:y,name:"Rice Shower",mainColor:"blue",secondaryColor:"magenta",compatibilities:[m,u,j,H,P,p,5,2,b,w,0,h,7,v,8,k,C,f,9,L,1,g,4,6,S,M,3,x,O]},B[17]={id:f,name:"Agnes Tachyon",mainColor:"white",secondaryColor:"brown",compatibilities:[k,w,6,0,g,4,C,9,2,L,1,x,H,u,h,5,m,j,M,y,7,P,b,p,v,8,S,3,O]},B[18]={id:g,name:"Winning Ticket",mainColor:"red",secondaryColor:"green",compatibilities:[0,4,P,w,M,k,C,f,6,9,5,b,h,j,2,u,1,m,H,L,x,7,p,y,v,3,S,8,O]},B[19]={id:v,name:"Sakura Bakushin O",mainColor:"pink",secondaryColor:"white",compatibilities:[8,S,y,L,u,h,p,m,j,2,x,H,P,3,7,C,1,k,w,f,g,9,O,4,5,0,b,6,M]},B[20]={id:j,name:"Super Creek",mainColor:"white",secondaryColor:"blue",compatibilities:[P,u,m,H,y,0,5,b,4,h,7,w,2,p,k,1,M,g,f,6,v,L,S,8,C,9,3,x,O]},B[21]={id:O,name:"Haru Urara",mainColor:"white",secondaryColor:"red",compatibilities:[x,5,S,v,M,L,0,8,3,H,w,7,u,f,g,6,h,4,9,1,j,2,k,b,p,P,y,m,C]},B[22]={id:k,name:"Matikane Fukukitaru",mainColor:"blue",secondaryColor:"orange",compatibilities:[0,f,1,g,4,w,6,9,C,j,5,b,L,u,y,x,P,h,7,H,2,M,p,m,8,v,3,S,O]},B[23]={id:w,name:"Nice Nature",mainColor:"red",secondaryColor:"green",compatibilities:[0,u,f,4,5,H,g,j,k,b,C,6,9,P,y,m,2,x,1,M,L,h,p,7,v,S,8,3,O]},B[24]={id:x,name:"King Halo",mainColor:"green",secondaryColor:"blue",compatibilities:[0,9,w,f,6,k,L,g,4,S,8,v,3,C,p,u,2,O,h,H,5,1,7,M,m,j,P,b,y]},B[25]={id:S,name:"Curren Chan",mainColor:"black",secondaryColor:"red",compatibilities:[v,8,7,2,u,h,x,j,H,P,L,y,p,m,3,6,f,4,1,0,M,O,g,5,w,k,b,9,C]},B[26]={id:H,name:"TM Opera O",mainColor:"pink",secondaryColor:"yellow",compatibilities:[P,m,j,u,y,0,5,b,2,p,w,h,7,4,f,9,1,M,g,6,L,8,k,S,v,C,x,3,O]},B[27]={id:P,name:"Biwa Hayahide",mainColor:"black",secondaryColor:"purple",compatibilities:[H,u,j,m,y,5,b,g,h,0,2,M,7,w,p,4,1,k,C,f,L,6,S,9,v,8,x,3,O]},B[28]={id:L,name:"Mihono Bourbon",mainColor:"white",secondaryColor:"pink",compatibilities:[3,1,6,4,8,b,9,7,p,f,2,v,k,g,x,5,0,H,w,M,u,y,h,m,j,P,S,C,O]},B[29]={id:M,name:"Narita Taishin",mainColor:"pink",secondaryColor:"brown",compatibilities:[5,g,P,j,H,2,f,h,w,L,u,C,4,1,m,0,k,b,6,7,p,9,y,x,S,O,3,v,8]};t(14),t(15);var I=t(0),D=function(e){Object(c.a)(t,e);var i=Object(d.a)(t);function t(e){var o;return Object(s.a)(this,t),(o=i.call(this,e)).state={horse:e.horse},o}return Object(l.a)(t,[{key:"render",value:function(){return Object(I.jsxs)("div",{className:"horseWrapper",children:[Object(I.jsx)("div",{className:"horseMain",style:{backgroundColor:this.props.horse.mainColor},children:Object(I.jsx)("div",{className:"horseSecondary",style:{backgroundColor:this.props.horse.secondaryColor}})}),this.props.horse.name]},this.props.horse)}}]),t}(o.Component),N=function(e){Object(c.a)(t,e);var i=Object(d.a)(t);function t(e){var o;return Object(s.a)(this,t),(o=i.call(this,e)).state={loop:[]},o}return Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getBreedingLoop(this.props.horses,this.props.disabledHorses)}},{key:"componentDidUpdate",value:function(e,i){e!==this.props&&this.getBreedingLoop(this.props.horses,this.props.disabledHorses)}},{key:"render",value:function(){var e=void 0;if(0===this.state.loop.length)e=Object(I.jsx)("p",{children:"Loading"});else{var i=this.state.loop.map((function(e){return Object(I.jsx)(D,{horse:e},e.id)}));e=Object(I.jsxs)("div",{children:[Object(I.jsx)("h1",{children:"Optimal Loop"}),Object(I.jsx)("div",{className:"loopWrapper",children:i})]})}return Object(I.jsx)("div",{children:e})}},{key:"findCompatibilityIndexInList",value:function(e,i){return e.findIndex((function(e){return e===i.id}))}},{key:"getCompatibilityPair",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=e.compatibilities,n=i.compatibilities;return Math.pow(this.findCompatibilityIndexInList(o,i)+this.findCompatibilityIndexInList(n,e),1.5)*t}},{key:"getCompatibilityList",value:function(e){for(var i=e.compatibilities,t=[],o=0;o<i.length;o++){var n=i[o];t[n.id]=this.getCompatibilityPair(e,n)}return t}},{key:"orderCompatibilityListByPairs",value:function(e){var i=e.compatibilities,t=this.getCompatibilityList(e),o=[];o[e.id]=-1;for(var n=0;n<i.length;n++)o[i[n].id]=null!=t[n].id?t[n].id:1e4;return o}},{key:"sumCompatibilities",value:function(e){for(var i=0,t=0;t<e.length;t++)i+=e[t];return i}},{key:"getCompatibilitiesSumArray",value:function(e){var i=[this.getCompatibilityPair(e[0],e[1])];return e.length>=3&&(i.push(this.getCompatibilityPair(e[0],e[2],2)),i.push(this.getCompatibilityPair(e[1],e[2]))),4===e.length&&(i.push(this.getCompatibilityPair(e[0],e[3],3)),i.push(this.getCompatibilityPair(e[1],e[3],2)),i.push(this.getCompatibilityPair(e[2],e[3]))),this.sumCompatibilities(i)}},{key:"getCompatibilitiesSum",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=[this.getCompatibilityPair(e,i)];return null!=t&&(n.push(this.getCompatibilityPair(e,t,2)),n.push(this.getCompatibilityPair(i,t))),null!=o&&(n.push(this.getCompatibilityPair(e,o,3)),n.push(this.getCompatibilityPair(i,o,2)),n.push(this.getCompatibilityPair(t,o))),this.sumCompatibilities(n)}},{key:"permutator",value:function(e){var i=[];return function e(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===t.length)i.push(o);else for(var n=0;n<t.length;n++){var r=t.slice(),a=r.splice(n,1);e(r.slice(),o.concat(a))}}(e),i}},{key:"findBestCompatiblityPermutation",value:function(e){for(var i=-1,t=[],o=0;o<e.length;o++){var n=this.getCompatibilitiesSumArray(e[o]);(0===o||n<i)&&(i=n,t=e[o])}return{order:t,sum:i}}},{key:"getBestCompatibilitiesSum",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=this.getCompatibilitiesSum(e,i),r=[e,i];if(null==t&&null==o)return{order:r,sum:n};var a=null;return null==(a=null==o?this.findBestCompatiblityPermutation(this.permutator([e,i,t])):this.findBestCompatiblityPermutation(this.permutator([e,i,t,o])))?null:{order:a.order,sum:a.sum}}},{key:"getBreedingLoop",value:function(e){for(var i=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=[],n=0;n<e.length;n++)o.push(e[n]);var r=[],a=1e4,s=o[0].compatibilities;if(0===o.length)return[];if(4===o.length){var l=this.getBestCompatibilitiesSum(o[0],o[1],o[2],o[3]);return this.setState((function(e,i){return{loop:l.order}})),l.order}for(var c=function(n){if(null!=e[1])n=s.length-1,o=[e[0],e[1]];else{var l=B.find((function(e){return d=n,e.id===s[n]}));if(-1!==i.findCompatibilityIndexInList(o,l)||t.includes(l)||i.getCompatibilitiesSum(o[0],l)>a)return d=n,"continue";o=[o[0],l]}for(var c=o[1].compatibilities,u=function(s){if(null!=e[2])s=c.length-1,o=[e[0],e[1],e[2]];else{var l=B.find((function(e){return d=n,p=s,e.id===c[s]}));if(-1!==i.findCompatibilityIndexInList(o,l)||t.includes(l)||i.getCompatibilitiesSum(o[0],o[1],l)>a)return p=s,"continue";o=[o[0],o[1],l]}for(var u=o[2].compatibilities,m=function(e){var l=B.find((function(i){return d=n,p=s,i.id===u[e]}));if(-1!==i.findCompatibilityIndexInList(o,l)||t.includes(l))return"continue";var c=i.getBestCompatibilitiesSum(o[0],o[1],o[2],l);null==c&&console.log("something went wrong"),c.sum<a&&(a=c.sum,r=c.order)},h=0;h<u.length;h++)m(h);p=s},p=0;p<c.length;p++)u(p);d=n},d=0;d<s.length;d++)c(d);return this.setState((function(e,i){return{loop:r}})),r}}]),t}(o.Component),T=(t(17),function(e){Object(c.a)(t,e);var i=Object(d.a)(t);function t(){return Object(s.a)(this,t),i.apply(this,arguments)}return Object(l.a)(t,[{key:"handleMouse",value:function(e,i){e.preventDefault(),1===e.nativeEvent.which?this.props.updateSelection(i,e.ctrlKey):3===e.nativeEvent.which&&this.props.updateDisabled(i)}},{key:"render",value:function(){var e=this,i=this.props.horses.map((function(i){for(var t=[e.props.selectedHorses.includes(i)?"selected":"",e.props.disabledHorses.includes(i)?"disabled":""],o="",n=0;n<t.length;n++)""!==t[n]&&(o+=" "+t[n]);return o=o.trim(),Object(I.jsx)("div",{className:o,onClick:function(t){e.handleMouse(t,i)},onContextMenu:function(t){e.handleMouse(t,i)},children:Object(I.jsx)(D,{horse:i})},i.id)}));return Object(I.jsx)("div",{className:"selector",children:i})}}]),t}(o.Component)),A=function(e){Object(c.a)(t,e);var i=Object(d.a)(t);function t(e){var o;return Object(s.a)(this,t),(o=i.call(this,e)).updateSelection=function(e,i){o.state.disabledHorses.includes(e)&&o.updateDisabled(e);var t=o.state.selectedHorses;if(i){var n=t.indexOf(e);-1!==n&&t.length>1?t.splice(n,1):t.length<3&&!t.includes(e)&&t.push(e)}else t=[e];o.setState((function(e,i){return{selectedHorses:t,disabledHorses:o.state.disabledHorses}}))},o.updateDisabled=function(e){if(!o.state.selectedHorses.includes(e)){var i=o.state.disabledHorses,t=i.indexOf(e);-1!==t?i.splice(t,1):i.push(e),o.setState((function(e,t){return{selectedHorses:o.state.selectedHorses,disabledHorses:i}}))}},o.state={selectedHorses:[B[0]],disabledHorses:[]},o}return Object(l.a)(t,[{key:"render",value:function(){return Object(I.jsxs)("div",{className:"App",children:[Object(I.jsx)("h1",{children:"Uma Musume: Pretty Derby Breeding Loop Optimizer"}),Object(I.jsx)("p",{children:"Left click to select a root horse to find a loop for"}),Object(I.jsx)("p",{children:"Ctrl+Left click to select up to three horses in one loop"}),Object(I.jsx)("p",{children:"Right click to disable a horse from being included in loop"}),Object(I.jsxs)("p",{children:["Using data from ",Object(I.jsx)("a",{href:"https://twitter.com/gamedukedeatho",children:"gamedukedeatho"})]}),Object(I.jsx)(T,{horses:B,updateSelection:this.updateSelection,selectedHorses:this.state.selectedHorses,updateDisabled:this.updateDisabled,disabledHorses:this.state.disabledHorses}),Object(I.jsx)(N,{horses:this.state.selectedHorses,disabledHorses:this.state.disabledHorses})]})}}]),t}(o.Component),F=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,19)).then((function(i){var t=i.getCLS,o=i.getFID,n=i.getFCP,r=i.getLCP,a=i.getTTFB;t(e),o(e),n(e),r(e),a(e)}))};document.title="Uma Musume Loop Optimizer",a.a.render(Object(I.jsx)(n.a.StrictMode,{children:Object(I.jsx)(A,{})}),document.getElementById("root")),F()}],[[18,1,2]]]);
//# sourceMappingURL=main.fc0d026e.chunk.js.map